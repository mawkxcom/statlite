"use strict";var Statlite=(()=>{var u=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var S=Object.prototype.hasOwnProperty;var v=(n,t)=>{for(var o in t)u(n,o,{get:t[o],enumerable:!0})},O=(n,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let e of y(t))!S.call(n,e)&&e!==o&&u(n,e,{get:()=>t[e],enumerable:!(i=h(t,e))||i.enumerable});return n};var P=n=>O(u({},"__esModule",{value:!0}),n);var $={};v($,{mount:()=>f,track:()=>l});function p(){return typeof window>"u"?"/":window.location.pathname+window.location.search}async function L(n,t){await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"omit"})}function l(n){let t=r(),o=(n.endpoint||t.endpoint).replace(/\/$/,""),i=n.site||t.site,e=p(),a=typeof document<"u"?document.title:void 0,s=`${o}/stats/track`;L(s,{site:i,page:e,title:a}).catch(()=>{})}function f(n){let t=n||document;Array.from(t.querySelectorAll("[data-statlite]")).forEach(async i=>{let e=i.dataset.statlite,a=r(),s=i.dataset.site||a.site,m=(i.dataset.endpoint||a.endpoint).replace(/\/$/,""),g=i.dataset.page||p();if(!(!s||!e))try{let w=new URLSearchParams({site:s,page:g}),d=await(await fetch(`${m}/stats/summary?${w.toString()}`)).json(),c="";e==="pv"&&(c=String(d.totalPv??"0")),e==="uv"&&(c=String(d.totalUv??"0")),e==="pagepv"&&(c=String(d.pagePv??"0")),i.textContent=c}catch{}})}if(typeof window<"u"){let t=function(){return{site:n.hostname,endpoint:n.origin.replace(/\/$/,"")+"/statlite"}};r=t;let n=(()=>{try{let i=document.currentScript;if(i?.src){let e=new URL(i.src,window.location.href);return{origin:e.origin,hostname:e.hostname}}}catch{}return{origin:window.location.origin,hostname:window.location.hostname}})();window.addEventListener("DOMContentLoaded",()=>{let i=t(),e=document.querySelector("[data-statlite-site]")?.getAttribute("data-statlite-site")||void 0,a=document.querySelector("[data-statlite-endpoint]")?.getAttribute("data-statlite-endpoint")||void 0;l({site:e||i.site,endpoint:a||i.endpoint}),f()})}var r;function r(){return{site:"localhost",endpoint:""}}return P($);})();
//# sourceMappingURL=index.global.js.map